const Marksheet = require('mongoose').model('Marksheet');
const StudentMark = require('mongoose').model('StudentMark');
const mongoose = require("mongoose");

module.exports = function(_id){
	Marksheet.findOne({
		_id
	})
	.exec(function(err, marksheet){
		if(err) return res.send('some error occured');
		if(marksheet){
			for(let i=0; i< marksheet.studentMarks.length; i++){
				StudentMark.findOne({
					_id: marksheet.studentMarks[i]
				})
				.remove(function(err){
					if(err) return res.send('some error occured');
				});
			}
			Marksheet.findOne({
				_id
			})
			.remove(function(err){
				if (err) return res.send('some error occured');
			});
		}
	});
}