extends flexLayout.pug

block header
	include layout.pug

block content
	- var examTitle = function(x, no)
		each exam, no2 in x
			if no2 > 0
				th
					a(href="/faculty/"+username+"/course/"+index+"/marksheet/"+exam.url) !{exam.name}
		if x.length > 0
			th
				a(href="/faculty/"+username+"/course/"+index+"/marksheet/"+x[0].url) !{x[0].name}(%)

	block function
		- var examBody = function(x, no){
			each exam, no2 in x
				if no2 > 0
					td !{exam.marks[no]} !{exam.parcentage[no]}
			if x.length > 0
				td !{x[0].marks[no]}
		- }

	block marksheetHead
		.d-flex.align-items-center.justify-content-between
			if (user.status === 'faculty')
				form.form-inline(action="/faculty/"+username+"/course/"+index+"/marksheet/csv/upload" method="post" enctype="multipart/form-data")
					.custom-file
						input.cutom-file-input(type="file" name="csvdata" accept="csv")
						span.custom-file-control
					input.ml-2.btn.btn-primary(type="submit" value="Upload")

				form.form-inline
					button.btn.btn-primary(type="submit", formmethod="get", formaction="/faculty/"+username+"/course/"+index+"/marksheet/student/add") Add Student

				form.form-inline
					button.btn.btn-primary(type="submit", formmethod="get", formaction="/faculty/"+username+"/course/"+index+"/marksheet/edit") Edit

				form.form-inline(action="/faculty/"+username+"/course/"+index+"/marksheet/add" method="post")
					.d-flex.justify-content-end.w-100
						select.mr-2.form-control(name="exam")
							option(value="assignment") Assignment
							option(value="fieldWork") Field Work
							option(value="final") Final
							option(value="mid") Mid
							option(value="quiz") Quiz
							option(value="presentation") Presentation
							option(value="project") Project

						input.btn.btn-primary(type="submit", value="Add")

	block marksheetBody
		table.mt-3.table.table-striped.table-bordered.table-hover.table-condensed.table-responsive
			thead
				tr
					th No.
					th Name
					th ID
					th Email
					th status
					- let x = user.course.marksheet.quiz
					- examTitle(x)
					- x = user.course.marksheet.mid
					- examTitle(x)
					- x = user.course.marksheet.assignment
					- examTitle(x)
					- x = user.course.marksheet.project
					- examTitle(x)
					- x = user.course.marksheet.presentation
					- examTitle(x)
					- x = user.course.marksheet.fieldWork
					- examTitle(x)
					- x = user.course.marksheet.final
					- examTitle(x)
					th Attendance(%)
					th Total(%)
					th Grade
					th Delete
			tbody
				each value, no in user.course.marksheet.name
					tr
						td !{no+1}
						td !{user.course.marksheet.name[no]}
						td !{user.course.marksheet.ID[no]}
						td !{user.course.marksheet.email[no]}
						td !{user.course.marksheet.courseStatus[no]}
						- x = user.course.marksheet.quiz
						- examBody(x, no)
						- x = user.course.marksheet.mid
						- examBody(x, no)
						- x = user.course.marksheet.assignment
						- examBody(x, no)
						- x = user.course.marksheet.project
						- examBody(x, no)
						- x = user.course.marksheet.presentation
						- examBody(x, no)
						- x = user.course.marksheet.fieldWork
						- examBody(x, no)
						- x = user.course.marksheet.final
						- examBody(x, no)
						td !{user.course.marksheet.attendance[no]}
						td !{user.course.marksheet.total[no]}
						td !{user.course.marksheet.grade[no]}
						if (user.status === 'faculty')
							td
								form(action="/faculty/"+username+"/course/"+index+"/marksheet/student/"+no+"/delete", method="post")
									input.btn.btn-danger(type="submit", value="Delete")
